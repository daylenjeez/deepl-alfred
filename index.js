import t from"alfy";import r from"deepl-node";function e(t,r,e,n){return new(e||(e=Promise))((function(s,o){function i(t){try{a(n.next(t))}catch(t){o(t)}}function l(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var r;t.done?s(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(i,l)}a((n=n.apply(t,r||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const n=r=>t.error(r),s=["en-US","zh"];const o=new class{constructor(t,r){this.translator=null,this.preferred=s,this.processTranslate=(t,r,s)=>e(this,void 0,void 0,(function*(){const e=null!=r?r:null,o=null!=s?s:this.preferred[0],i=yield this.translateText(t,e,o);if(!i)return void n("No result");const{text:l,detectedSourceLang:a}=i;if(a===o){const r=this.preferred[1];return r?this.processTranslate(t,e,r):l}return l})),this.instanceInit(t),this.preferredInit(null==r?void 0:r.preferred)}instanceInit(t){t?this.translator=new r.Translator(t):n("Missing auth key")}preferredInit(t){this.preferred=t?t.trim().split(","):s}translateText(t,r,e){var n;return null===(n=this.translator)||void 0===n?void 0:n.translateText(t,null!=r?r:null,e)}}(process.env.auth_key,{preferred:process.env.preferred});(r=>{const{input:e}=t;r(e)})((r=>e(void 0,void 0,void 0,(function*(){const e=yield o.processTranslate(r,null);var n,s;e&&(n=[{title:e,arg:e}],t.output(n,s))}))));
