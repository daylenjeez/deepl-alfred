import r from"alfy";import t from"deepl-node";function e(r,t,e,n){return new(e||(e=Promise))((function(s,i){function o(r){try{a(n.next(r))}catch(r){i(r)}}function l(r){try{a(n.throw(r))}catch(r){i(r)}}function a(r){var t;r.done?s(r.value):(t=r.value,t instanceof e?t:new e((function(r){r(t)}))).then(o,l)}a((n=n.apply(r,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const n=["en-US","zh"];const s=new class{constructor(r,t){this.translator=null,this.preferred=n,this.instanceInit(r),this.preferredInit(null==t?void 0:t.preferred)}instanceInit(e){if(!e)return n="Missing auth key",void r.error(n);var n;this.translator=new t.Translator(e)}preferredInit(r){this.preferred=r?r.trim().split(","):n}translateText(r,t,e){var n;return null===(n=this.translator)||void 0===n?void 0:n.translateText(r,null!=t?t:null,e)}processTranslate(r,t,n){return e(this,void 0,void 0,(function*(){const e=null!=t?t:null,s=null!=n?n:this.preferred[0],i=yield this.translateText(r,e,s);if(!i)return;const{text:o,detectedSourceLang:l}=i;if(l===s){const t=this.preferred[1];return t?this.processTranslate(r,e,t):o}return o}))}}(process.env.auth_key,{preferred:process.env.preferred});(t=>{const{input:e}=r;t(e)})((t=>e(void 0,void 0,void 0,(function*(){const e=yield s.processTranslate(t,null);var n,i;e&&(n=[{title:e}],r.output(n,i))}))));
