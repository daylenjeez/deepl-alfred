import t from"alfy";import r from"deepl-node";function e(t,r,e,n){return new(e||(e=Promise))((function(s,i){function o(t){try{a(n.next(t))}catch(t){i(t)}}function l(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){var r;t.done?s(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(o,l)}a((n=n.apply(t,r||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const n=["en-US","zh"];const s=new class{constructor(t,r){this.translator=null,this.preferred=n,this.processTranslate=(t,r,n)=>e(this,void 0,void 0,(function*(){const e=null!=r?r:null,s=null!=n?n:this.preferred[0],i=yield this.translateText(t,e,s);if(!i)return;const{text:o,detectedSourceLang:l}=i;if(l===s){const r=this.preferred[1];return r?o:this.processTranslate(t,e,r)}return o})),this.instanceInit(t),this.preferredInit(null==r?void 0:r.preferred)}instanceInit(e){if(!e)return n="Missing auth key",void t.error(n);var n;this.translator=new r.Translator(e)}preferredInit(t){this.preferred=t?t.trim().split(","):n}translateText(t,r,e){var n;return null===(n=this.translator)||void 0===n?void 0:n.translateText(t,null!=r?r:null,e)}}(process.env.auth_key,{preferred:process.env.preferred});(r=>{const{input:e}=t;r(e)})((r=>e(void 0,void 0,void 0,(function*(){const e=yield s.processTranslate(r,null);var n,i;e&&(n=[{title:e}],t.output(n,i))}))));
