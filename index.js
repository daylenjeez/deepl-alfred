import t from"alfy";import e from"deepl-node";function n(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function u(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}l((r=r.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;var r;const o=new class{constructor(t,e){this.translator=null,this.init(t)}init(n){if(!n)return r="Missing auth key",void t.error(r);var r;this.translator=new e.Translator(n)}translateText(t,e,r){var o;return n(this,void 0,void 0,(function*(){return yield null===(o=this.translator)||void 0===o?void 0:o.translateText(t,null!=e?e:null,null!=r?r:"zh")}))}getSourceLanguageCode(t){return this.translateText(t)}}(process.env.auth_key),i=null!==(r=process.env.preferred)&&void 0!==r?r:"zh,en";(e=>{n(void 0,void 0,void 0,(function*(){const n=yield o.translateText(e,null,i);if(!n)return;const{text:r,detectedSourceLang:a}=n,[u,l]=JSON.parse(i).split(",");var s,c;a&&a===u||(s=Array.isArray(n.text)?n.text.map((t=>({title:t.text}))):[{title:n.text},{title:null==n?void 0:n.detectedSourceLang}],t.output(s,c))}))})(t.input);
